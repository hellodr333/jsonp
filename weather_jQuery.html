<!DOCTYPE>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>天气预报</title>
<style type="text/css">
body{padding:100px;font-family: "yahei"}
li{list-style:none;}

</style>
<script type="text/javascript" src="jquery-1.7.2.js"></script>
<script>
$(function(){
	$.ajax({
			"type":'get',
			"url":"http://api.k780.com:88/?app=weather.future&weaid=" + $("#sel").val()+ "&appkey=18549&sign=157314daa35aff793a369a34faa29808&format=json&jsoncallback=show",
			"dataType":"jsonp",
			"async": false,
			"jsonp":'callback',
			"jsonpCallback":'show',
			"success":function(json){
				var s="";
				$.each(json.result,function(n,value){
					s+="<li>日期："+value.days+"</li>\
						<li>天气："+value.weather+"</li>\
						<li>最高温度："+value.temp_high+"</li>\
						<li>最低温度："+value.temp_low+"</li><br/><br/>"
				})
				$("#list").empty().append(s)
			},
			"error":function(){
				console.log('error')
			}
		})

	$("#sel").click(function(){
		$.ajax({
			"type":'get',
			"url":"http://api.k780.com:88/?app=weather.future&weaid=" + $("#sel").val()+ "&appkey=18549&sign=157314daa35aff793a369a34faa29808&format=json&jsoncallback=show",
			"dataType":"jsonp",
			"async": false,
			"jsonp":'callback',
			"jsonpCallback":'show',
			"success":function(json){
				console.log(json.result)
				var s="";
				$.each(json.result,function(n,value){
					s+="<li>日期："+value.days+"</li>\
						<li>天气："+value.weather+"</li>\
						<li>最高温度："+value.temp_high+"</li>\
						<li>最低温度："+value.temp_low+"</li><br/><br/>"
				});
				$("#list").empty().append(s);
				//setTimeout("javascript:location.href='http://www.baidu.com/'", 2500);  //实现页面内容的跳转
			},
			"error":function(){
				console.log('error')
			}
		})
	})
})

</script>
</head>
<body>
一周天气预报
<select name="" id="sel">
	<option value="上海">上海</option>
	<option value="北京">北京</option>
	<option value="广州">广州</option>
	<option value="深圳">深圳</option>
	<option value="南京">南京</option>
</select>
<ul id="list">
<!-- 	<li>今天天气：晴</li>
	<li>最高温度：29</li>
	<li>最低温度：10</li> -->
</ul>
</body>
</html>







